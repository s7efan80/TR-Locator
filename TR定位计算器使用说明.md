# TR定位计算器使用说明

## 简介
TR定位计算器是一个用于计算放电源位置的交互式工具。它通过四个传感器的时差信息，使用最小二乘法计算放电源的精确位置。

## 功能特点
- 3D可视化显示传感器和放电源位置
- 实时计算和更新
- 支持正反向计算（根据时差算位置/根据位置算时差）
- 完整的时差校验功能
- 可自定义显示选项

## 使用步骤

### 1. 设置模型尺寸
- 在顶部输入框中设置模型的X、Y、Z尺寸（单位：cm）
- 默认值：X=500cm、Y=300cm、Z=200cm

### 2. 设置传感器位置
- 输入四个传感器（P1-P4）的坐标（单位：cm）
- 注意：传感器应尽量布置在模型表面，避免放置在模型内部
- 默认传感器位置：
  * P1: (500, 0, 0)
  * P2: (0, 300, 0)
  * P3: (0, 0, 200)
  * P4: (500, 300, 200)

### 3. 输入时差数据
- 输入各传感器对之间的时差t_ij（单位：ns）
- 关键时差参数：
  * t12：P1和P2之间的时差
  * t13：P1和P3之间的时差
  * t14：P1和P4之间的时差
  * t23：P2和P3之间的时差
  * t24：P2和P4之间的时差
  * t34：P3和P4之间的时差

### 4. 设置波速
- 输入声波在介质中的传播速度（单位：cm/ns）
- 默认值：20 cm/ns

### 5. 计算操作
#### 正向计算（根据时差计算放电源位置）
1. 确保已输入必要的时差数据（至少需要t12、t24、t14）
2. 点击"计算放电源位置"按钮
3. 系统会自动进行时差校验：
   - 校验t14 = t12 + t24
   - 校验t13 = t12 + t23
   - 校验t34 = t14 - t13

#### 反向计算（根据放电源位置计算时差）
1. 在"输入放电源坐标"区域输入X、Y、Z坐标
2. 点击"根据放电源反算时差"按钮
3. 系统会自动计算并更新所有时差值

### 6. 显示选项
可以通过开关控制以下显示效果：
- 显示连线：在放电源和传感器之间显示连线
- 显示箭头：显示从放电源到传感器的方向箭头
- 显示到达时间标签：显示声波传播时间
- 显示距离标签：显示放电源到各传感器的距离

## 结果解读
- 计算结果区域会显示：
  * 放电源的精确坐标
  * 到各传感器的距离（d1-d4）
  * 声波到达时间（t1-t4）

## 注意事项
1. 时差数据的一致性很重要，系统会自动进行三重校验
2. 传感器应该布置在模型表面，如果位于内部会收到警告提示
3. 如果计算得到的放电源位置在模型范围外，系统会给出警告
4. 波速值如果无效，系统会自动使用默认值20 cm/ns
5. 3D视图支持鼠标操作：
   - 旋转：点击并拖动
   - 缩放：滚轮
   - 平移：按住Shift键拖动

## 提示
- 使用正交投影方式显示3D图形，确保准确的空间关系显示
- 所有数值都可以实时调整，系统会自动更新显示
- 坐标系采用第一象限正坐标系（仅用于可视化，不影响计算）
